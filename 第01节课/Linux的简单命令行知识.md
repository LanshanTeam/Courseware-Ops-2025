# Linux的简单命令行知识

**前言**：驾驭一台计算机操作系统如同管理一座小城。我们就像小城的城主，需要对小城的治安、能源分配、进出入口、人员任务等等进行管理。而Linux是一款异常强大的操作系统，一座座“小城”以及“大城”组成了互联网行业基石，打造了庞大的网络空间，所以我们可以万里之隔与地球任何一个人在网络上交流。。我们今天要学习的就是管理自己的“小城”。由于Linux系统的知识非常丰富，短短一篇文章是无法将Linux系统的奥妙解说明白，故本文命名为Linux的简单命令行知识，另外本文许多命令行以Ubuntu操作系统为准。

![01](./img/01.png)

## 根目录 `/` 下的主要目录及其作用

了解Linux目录结构是成为合格城主的第一步：

- `/bin`：基本命令二进制文件（所有用户可用，里面装满了可执行程序文件）
- `/etc`：系统配置文件
- `/home`：用户主目录
- `/var`：经常变化的文件，如日志
- `/tmp`：临时文件
- `/usr`：用户程序和数据
- `/root`：**root用户的主目录**（权力的中心）
- `/boot`：启动相关文件
- `/dev`：设备文件（没吃，Linux把硬件设备也看成一个设备）
- `/proc`：进程和系统信息
- `/opt`：可选的应用软件包
- `/mnt`：临时挂载点（外来设备的接入点）
- `/media`：可移动媒体挂载点（移动设备的接入点）

# Linux命令行的一般格式

在Linux中，命令行遵循一个相对统一的结构，理解这个结构有助于我们更好地掌握各种命令的使用方法。

## 基本命令格式

```bash
命令 [选项] [参数]
```

**各部分的含义：**

- **命令**：要执行的操作或程序名称

- **选项**：修改命令行为的标志（通常以`-`或`--`开头）

- **参数**：命令操作的对象（文件、目录、用户等）

  

## Linux哲学思想——“一切皆文件”

在Linux中，所有内容（包括设备和目录）都被视为文件。无论是你敲击的键盘、运行的进程，还是插入的U盘，在Linux眼中都是文件。

## 基础文件操作命令

### `pwd` - 显示当前目录

- **作用**：告诉你现在身处哪个目录。

- **常用参数**：无

- **示例**：

  ```bash
  pwd
  # 输出：/home/username
  ```

### `cd`-切换当前目录

+ 作用：切换去目的目录

+ 常见参数：无

  ```bash
  cd  /root                 // 普通切换目录
  cd -                      //切换到上一次所处于的目录
  cd ..                     //切换到上一级目录
  ```

  

### `touch` - 创建空文件或更新文件时间

- **作用**：创建新文件，或更新已有文件的访问和修改时间。

- **常用参数**：无

- **示例**：

  ```bash
  touch myfile.txt
  ```

  

### `ls` - 列出目录内容

- **作用**：查看当前目录下有哪些文件和文件夹。

- **常用参数**：

  - `-l`：以列表形式显示详细信息
  - `-a`：显示所有文件（包括隐藏文件）
  - `-h`：与 `-l` 一起使用，以易读方式显示文件大小
  - `-t`：按修改时间排序，最新的在前
  - `-S`：按文件大小排序，最大的在前

- **示例**：

  ```bash
  ls              # 简单列出
  ls -la          # 详细列出所有文件
  ls -lh *.txt    # 易读方式列出所有txt文件
  ls -lht         # 按时间排序显示详细信息
  ```

  

### `cat` / `less` / `more` - 查看文件内容

- **`cat`**：一次性显示整个文件内容

- **`less`**：分页查看，可上下滚动

- **`more`**：分页查看，只能向下翻页

- **cat常用参数**：

  - `-n`：显示行号
  - `-b`：显示非空行的行号
  - `-s`：将多个空行压缩为一个空行

  **less常用参数**：

  - `/关键词`：向前搜索关键词
  - `?关键词`：向后搜索关键词
  - `n`：查找下一个匹配项
  - `N`：查找上一个匹配项
  - `q`：退出

  **示例**：

  ```bash
  cat file.txt            # 显示整个文件
  cat -n file.txt         # 带行号显示
  less file.txt           # 分页查看，支持搜索
  more file.txt           # 分页查看，只能向下
  ```

### `rm` - 删除文件或目录

- **作用**：删除文件或目录（谨慎使用！）

- **常用参数**：

  - `-r`：递归删除目录及其内容
  - `-f`：强制删除，不提示

- **示例**：

  ```bash
  rm file.txt          # 删除文件
  rm -rf myfolder      # 强制删除文件夹及其内容
  ```



### `find` - 查找文件

- **作用**：在指定目录中查找文件。

- **常用参数**：

  - `-name`：按文件名查找
  - `-type`：按类型查找（f=文件，d=目录）
  - `-size ±大小`：按文件大小搜索（+表示大于，-表示小于）
  - `-user 用户名`：按文件所有者搜索

- **示例**：

  ```bash
  # 基本文件名搜索
  find /home -name "*.txt"                    # 在/home下找所有txt文件
  find . -name "file??.log"                   # 找类似file01.log的文件
  
  # 按类型和大小搜索
  find /var/log -type f -name "*.log"         # 在/var/log下找所有log文件
  find . -type f -size +10M                   # 找大于10MB的文件
  find . -type f -size -1K                    # 找小于1KB的文件
  
  # 组合条件搜索
  find . -name "*.tmp" -type f -size +100M    # 找大于100MB的tmp文件
  find /home -user john -name "*.pdf"         # 找用户john的所有pdf文件
  ```

### `cp`-复制文件

+ **作用**：复制源文件到目的文件
+ **常用参数**：
  - `-r` 或 `-R`：递归复制，用于复制目录及其所有内容。

+ **实例**

  ```bash
  cp file1.txt file2.txt          # 复制file1.txt为file2.txt
  cp -r mydir/ mydir_backup/      # 递归复制整个目录
  ```

### `mv`-移动文件或目录

+ **作用**：移动文件或目录到另一个位置

+ 常用参数：无

+ 实例

  ```bash
  mv oldname.txt newname.txt      # 重命名文件
  mv file1.txt /home/user/        # 移动文件到指定目录
  ```

------

## 网络相关命令

### 端口操作

#### `telnet` - 测试端口连通性

- **作用**：检查远程主机的某个端口是否开放。

- **示例**：

  bash

  ```bash
  telnet example.com 80          # 测试80端口（HTTP）
  telnet 192.168.1.1 22          # 测试22端口（SSH）
  telnet mail.server.com 25      # 测试25端口（SMTP）
  
  # 退出telnet：
  Ctrl+]                         # 进入telnet命令模式
  quit                           # 退出telnet
  ```

  

#### `nc` (netcat) - 网络界的瑞士军刀

- **作用**：读写网络连接，可用于端口扫描、文件传输等。

- **常用参数**：

  - `-z`：端口扫描模式，不发送数据
  - `-v`：详细输出

- **示例**：

  ```bash
  nc -zv example.com 20-100              # 扫描20-100端口范围
  nc -zv 192.168.1.1  80                 # 检查80端口是否打开
  ```

  

#### `dig` - DNS查询工具

- **作用**：查询DNS相关信息。

- **常用参数**：

  - `@服务器`：指定DNS服务器
  - `+short`：简洁输出
  - `-x IP`：反向DNS查找
  - `+trace`：跟踪DNS解析过程

  **示例**：

  ```bash
  dig example.com                    # 基本DNS查询
  dig @8.8.8.8 example.com           # 使用Google DNS查询
  dig example.com +short             # 简洁输出
  dig example.com +trace             # 跟踪解析过程
  dig -x 8.8.8.8                     # 反向查找IP
  ```

  

------

- ## 文本编辑神器：`vim`

  `vim`是Linux中最强大的文本编辑器之一，虽然初学可能觉得复杂，但熟练掌握后效率极高。

  ### 基本模式：

  - **普通模式**：移动光标、删除、复制粘贴等 （点击ESC键）
  - **插入模式**：输入文本内容（需要先进入普通模式，点击 a 或 i 文本下方会显示 `**insert**`）
  - **命令模式**：保存、退出、搜索等 (需要先进入普通模式，然后才能进入命令模式，点击  :   )

  ### 常用操作：

  ```bash
  vim filename.txt           # 用vim打开文件
  ```

  

  **插入文本**：

  - `i`：在光标前插入
  - `a`：在光标后插入
  - `o`：在下方新建一行插入
  - `I`：在行首插入
  - `A`：在行尾插入

  **移动光标**：

  - `h` `j` `k` `l`：左、下、上、右
  - `0`：行首
  - `$`：行尾
  - `gg`：文件开头
  - `G`：文件末尾
  - `Ctrl+f`：向下翻页
  - `Ctrl+b`：向上翻页

  **编辑操作**：

  - `dd`：删除当前行
  - `yy`：复制当前行
  - `p`：粘贴
  - `u`：撤销
  - `Ctrl+r`：重做

  **搜索替换**：

  - `/关键词`：向前搜索
  - `?关键词`：向后搜索
  - `n`：下一个匹配项
  - `:%s/旧文本/新文本/g`：全局替换

  **保存退出**（重中之重）：

  - `:w`：保存
  - `:q`：退出
  - `:wq` 或 `ZZ`：保存并退出
  - `:q!`：强制退出不保存

------

一些提示：新手可能会为了图方便，就直接使用root身份，进行操作，而不是使用普通用户。而在生产环境，我们的每一步操作都需要十分谨慎，误操作的成本是很高的，所以请从普通用户开始，学习Linux系统吧。

**结语**：作为一城之主，熟悉这些基础命令只是开始。Linux世界广阔无垠，每个命令都有更多参数和技巧等待你去探索。记住，最好的学习方式就是动手实践。小城很大，请尽情探索吧。